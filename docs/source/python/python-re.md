# 正規表現を使いたい

```python
import re
re.match("正規表現パターン", "対象文字列")
re.search("正規表現パターン", "対象文字列")
```

``match``は文字列の先頭でのみマッチを確認し、
``search``は文字列のどこでもマッチを確認する基本的な感数です。
それぞれの動作の違いの詳細は[search vs. match](https://docs.python.org/ja/3/library/re.html#search-vs-match)を参照してください。

同じ正規表現パターンを繰り返して利用する場合は、``re.compile``して正規表現オブジェクトを作成するとよいみたいです。

```python
p = re.compile("正規表現パターン")
p.match("対象文字列")
p.search("対象文字列")
```

## IPアドレスを検索したい

```python
re.search("(\d{1,3}\.){3}\d{1,3}") # IPv4
re.search("([0-9A-Fa-f]{0,4}:){7}[0-9A-Fa-f]{0,4}") # IPv6
```

``\d``は``[0-9]``を意味するメタ文字です。
IPv4アドレスに必要な3桁の整数値は``\d{1,3}``で表現できます。
これをピリオド（``.``）を使って4つ組み合わせています。

```{note}
``\d{1,3}``は0--999にマッチします。
IPv4アドレス値は0--255（8ビット）しか取らないのですが、
これをきちんと書こうとするとめんどくさいので手を抜いています。

きちんと書くと ``(\d{1,2}|1\d{2}|2[0-5]{2})``（= 0--99 + 100--199 + 200--255）でしょうか。
```

## 16進数を検索したい

```python
re.search("[0-9A-Fa-f]", "対象文字列")
```

1桁の16進数は``[0-9A-Fa-f]``で表すことができます。
IPv6アドレスをマッチさせたい場合などに、この正規表現を繰り返して使います。

## リファレンス

- [re - 正規表現操作](https://docs.python.org/ja/3/library/re.html)
- [re - search() vs. match()](https://docs.python.org/ja/3/library/re.html#search-vs-match)
