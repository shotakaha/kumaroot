# 複雑なパイプしたい（``xargs``）

```console
$ コマンド | xargs コマンド
```

`xargs`コマンドで、あるコマンドの実行結果を引数にして、つぎのコマンドに渡すことだできます。
パイプとはちょっと違うと思いますが、「複雑なパイプ」と説明しておきます。

## ファイルのパーミッションを一括変更したい

```console
// ファイル: 664に変更
$ find . -type f | xargs -d "\n" chmod 664

// ディレクトリ: 775に変更
$ find . -type d | xargs --delimiter="\n" chmod 775
```

``xargs``は``find``系の検索コマンドとの組み合わせてよく使います。
``find``コマンドと``chmod``コマンドを組み合わせて、ファイルのパーミッションを一括して変更できます。

``xargs``の引数は、デフォルトだと空白文字で改行されてしまいます。
``--delimiter="\n"``をつけて、ファイル名やディレクトリ名に空白文字が含まれていても改行されないようにしています。

```console
// HTMLファイルに限定
$ find . -type f -name "*.html" -print0 | xargs -0 chmod 664
```

HTMLファイルに限定したい場合は、``-name "*.html"``とすればOKです。
`find -print0`で区切り文字を`null`にすると、`xargs -0`で区切り文字を判別できます。

## ファイルを一括削除したい

```console
// 削除したいファイルを検索
$ fd "検索パターン"

// 実行結果に問題がなければxargsに渡す
$ fd "検索パターン" | xargs rm
```

ファイルを一括削除したい場合も`xargs`と組み合わせて使えます。
`fd "検索パターン"` で対象となるファイル群を確認して、
問題がなければ、そのまま`| xargs rm`にパイプします。

::: {note}

`rm "検索パターン"` のようにしても同じ結果が得られますが、
削除したいファイルの確認 -> 削除を実行、のようなフローに
簡単にできるのが`xargs`のよいところだと思っています。

:::
